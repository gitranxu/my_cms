<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	
	<link rel="stylesheet" href="/stylesheets/base.css">
	<link rel="stylesheet" href="/stylesheets/animate.min.css">
	<link rel="stylesheet" href="/stylesheets/back_common.css" class="need_remove">
    <style>
        .input_file_btn {
            opacity: 0.4;
            background: yellow;
            height: 142px;
            width: 180px;
            position: absolute;
        }
    </style>
</head>
<body style="background:orange;">
	
  	<!-- <div id="back" class="wrap1200" prev_view_page_url="http://localhost:3000/projects/tmp/aaa.html">
  	        <div id="content"></div>
  	        <div id="config"></div>
  	    </div> -->
    

	<div id="c_edit_s_win_id" class="c_edit_s_win">
		<!-- <form action="/file/upload" enctype="multipart/form-data" method="post" id="test">
			<input type="file" name="upload" multiple="multiple">
			<input type="submit" value="上传">
		</form> -->

		<input type="file" id="file1" name="file" class="input_file_btn">
		<input type="button" value="上传" id="uploadbtn">
		<div>图片上传</div>
		<img src="/images/sys/default_upload.jpg" style="width:200px;height:100px;" alt="" id="test2">
		<div class="href"></div>
		<div class="new_open"></div>
		<div>提交</div>
	</div>

    

    

	<script src="/javascripts/other/jquery-1.9.1.min.js"></script>
	<script src="/javascripts/other/ajaxfileupload.js"></script>
	<!-- <script src="/javascripts/other/juicer-min.js" class="need_remove"></script>
	    <script src="/javascripts/cms_back.js" class="need_remove"></script> -->
	<script type="text/javascript">
	$().ready(function(){
		$('#uploadbtn').click(function(){
			ajaxFileUpload();
		});

		function ajaxFileUpload(){
			$.ajaxFileUpload({
				url : '/file/upload',
				secureuri:false,
				fileElementId:'file1',
				success:function(data,status){
					if(status=='success'){
						var reg = /\{.+\}/;
                        var msg_str = reg.exec(data)[0];
                        var msg_str_done = msg_str.replace(/\\\\/g,'/').replace('public','');
                        var msg_obj = eval('('+msg_str_done+')');
                        $('#test2').attr('src',msg_obj.img_path);
					}
				},
				error:function(){
					alert('here...');
				},
				dataType:'text'
			});
		}
	});
	</script>
</body>
</html>